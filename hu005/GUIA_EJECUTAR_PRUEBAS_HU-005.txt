================================================================================
  GUÃA COMPLETA PARA EJECUTAR PRUEBAS DEL HU-005
  Sistema de NotificaciÃ³n de CorrecciÃ³n de Documentos
================================================================================

FECHA: 9 de noviembre de 2025
AUTOR: Sistema de Convalidaciones UNAB
VERSIÃ“N: 1.0

================================================================================
ğŸ“‹ TABLA DE CONTENIDOS
================================================================================

1. REQUISITOS PREVIOS
2. INICIAR EL ENTORNO n8n
3. VERIFICAR CONFIGURACIÃ“N
4. EJECUTAR PRUEBAS MANUALES (4 TEMPLATES)
5. EJECUTAR PRUEBAS AUTOMÃTICAS (PowerShell)
6. VERIFICAR RESULTADOS
7. DETENER EL ENTORNO
8. TROUBLESHOOTING

================================================================================
1ï¸âƒ£ REQUISITOS PREVIOS
================================================================================

ANTES DE COMENZAR, ASEGÃšRATE DE TENER:

âœ… Docker Desktop instalado y ejecutÃ¡ndose
âœ… n8n container corriendo (convalidacion-academica-n8n-1)
âœ… Workflow HU-005.json importado en n8n
âœ… Credenciales SMTP configuradas (maudevchile@gmail.com)
âœ… Email de destino activo (lucasmaulenr@gmail.com)

VERIFICAR DOCKER:
1. Abre Docker Desktop
2. Ve a "Containers"
3. Busca: convalidacion-academica-n8n-1
4. Estado debe ser: "Running" (verde)

================================================================================
2ï¸âƒ£ INICIAR EL ENTORNO n8n
================================================================================

OPCIÃ“N A: USAR DOCKER DESKTOP (RECOMENDADO)
--------------------------------------------
1. Abre Docker Desktop
2. Ve a pestaÃ±a "Containers"
3. Busca: convalidacion-academica-n8n-1
4. Si estÃ¡ detenido (Stopped):
   - Click en botÃ³n "â–¶ Start"
5. Espera 10-15 segundos hasta que estado sea "Running"
6. Abre navegador: http://localhost:5678


OPCIÃ“N B: USAR LÃNEA DE COMANDOS (PowerShell)
----------------------------------------------
1. Abre PowerShell como Administrador

2. Navega a la carpeta del proyecto:
   cd C:\Users\lucas\OneDrive\Escritorio\Uni2025\Practica\Convalidacion-Academica

3. Inicia Docker Compose:
   docker-compose up -d

4. Verifica que estÃ¡ corriendo:
   docker ps

   DeberÃ­as ver:
   CONTAINER ID   IMAGE     COMMAND      STATUS       PORTS                    NAMES
   xxxxxxxxxxxx   n8nio...  "tini..."    Up 2 mins    0.0.0.0:5678->5678/tcp   convalidacion-academica-n8n-1

5. Abre navegador: http://localhost:5678

================================================================================
3ï¸âƒ£ VERIFICAR CONFIGURACIÃ“N
================================================================================

PASO 1: ACCEDER A n8n
----------------------
1. Abre navegador
2. Ve a: http://localhost:5678
3. Inicia sesiÃ³n con tus credenciales

PASO 2: ABRIR WORKFLOW HU-005
------------------------------
1. En el menÃº izquierdo, click en "Workflows"
2. Busca: "HU-005: NotificaciÃ³n CorrecciÃ³n Documentos"
3. Click para abrir

PASO 3: VERIFICAR NODOS ACTIVOS (9 NODOS)
------------------------------------------
Debes ver estos nodos en VERDE:
âœ… Webhook-HU004
âœ… Function-ValidarEntrada
âœ… IF-DatosValidos
âœ… Function-PrepararDatos
âœ… Function-RedactarEmail
âœ… Email-Correccion
âœ… Respond-Success
âœ… Respond-Error-Validacion
âœ… Function-LogErrorSMTP
âœ… Respond-Error-SMTP

PASO 4: ACTIVAR WEBHOOK
------------------------
1. Click en nodo "Webhook-HU004"
2. Verifica que aparezca:
   URL: http://localhost:5678/webhook/hu005-notificacion-correccion
   Method: POST
3. Si no estÃ¡ activo, click en botÃ³n "Activate" (esquina superior derecha)

PASO 5: VERIFICAR CREDENCIALES SMTP
------------------------------------
1. Click en nodo "Email-Correccion"
2. Verifica configuraciÃ³n:
   - Host: smtp.gmail.com
   - Port: 465
   - User: maudevchile@gmail.com
   - Secure Connection: SSL/TLS
   - Encoding: quoted-printable
3. Si falta configuraciÃ³n, agrÃ©gala desde:
   Settings > Credentials > SMTP account

================================================================================
4ï¸âƒ£ EJECUTAR PRUEBAS MANUALES (4 TEMPLATES)
================================================================================

INSTRUCCIONES GENERALES:
------------------------
1. Abre PowerShell
2. Copia y pega cada comando completo
3. Presiona Enter
4. Espera 5-10 segundos
5. Revisa tu email: lucasmaulenr@gmail.com


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PRUEBA 1: FORMATO INCORRECTO (formato_incorrecto)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OBJETIVO: Validar template cuando el archivo no es PDF
CARACTERES UTF-8: MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez (Ã¡, Ã©, Ã±)

COMANDO POWERSHELL:
-------------------
$jsonBody = @{
  idSolicitud = "SOL-2025-001"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez"
    rut = "12.345.678-9"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "formato_incorrecto"
    mensaje = "El archivo no estÃ¡ en formato PDF"
    detalles = @{
      archivoNombre = "certificado_notas.docx"
      archivoTipo = "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
      motivoRechazo = "Solo se aceptan archivos en formato PDF"
    }
  }
} | ConvertTo-Json -Depth 10

Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST `
  -Body $jsonBody `
  -ContentType "application/json" `
  | Select-Object StatusCode, Content

RESULTADO ESPERADO:
-------------------
StatusCode: 200
Content: {"success": true, "mensaje": "Email de correcciÃ³n enviado exitosamente"}

EMAIL ESPERADO:
---------------
Para: lucasmaulenr@gmail.com
Asunto: CorrecciÃ³n Requerida - Formato de Documento Incorrecto
Contenido: "Estimado/a MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez..."
Validar: Caracteres especiales (Ã¡, Ã©, Ã±) se ven correctos


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PRUEBA 2: TAMAÃ‘O EXCEDIDO (tamano_excedido)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OBJETIVO: Validar template cuando el archivo supera 10 MB
CARACTERES UTF-8: AndrÃ©s MuÃ±oz (Ã©, Ã±)

COMANDO POWERSHELL:
-------------------
$jsonBody = @{
  idSolicitud = "SOL-2025-002"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "AndrÃ©s MuÃ±oz"
    rut = "23.456.789-0"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "tamano_excedido"
    mensaje = "El archivo supera el tamaÃ±o mÃ¡ximo permitido"
    detalles = @{
      archivoNombre = "certificado_notas.pdf"
      archivoTipo = "application/pdf"
      tamanoMB = "15.7"
    }
  }
} | ConvertTo-Json -Depth 10

Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST `
  -Body $jsonBody `
  -ContentType "application/json" `
  | Select-Object StatusCode, Content

RESULTADO ESPERADO:
-------------------
StatusCode: 200
Content: {"success": true, "mensaje": "Email de correcciÃ³n enviado exitosamente"}

EMAIL ESPERADO:
---------------
Para: lucasmaulenr@gmail.com
Asunto: CorrecciÃ³n Requerida - Archivo Demasiado Grande
Contenido: "Estimado/a AndrÃ©s MuÃ±oz..."
           "TamaÃ±o actual: 15.7 MB"
Validar: Caracteres especiales (Ã©, Ã±) se ven correctos


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PRUEBA 3: ARCHIVO CORRUPTO (archivo_corrupto)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OBJETIVO: Validar template cuando el archivo estÃ¡ daÃ±ado
CARACTERES UTF-8: JosÃ© HernÃ¡ndez (Ã©, Ã¡)

COMANDO POWERSHELL:
-------------------
$jsonBody = @{
  idSolicitud = "SOL-2025-003"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "JosÃ© HernÃ¡ndez"
    rut = "34.567.890-1"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "archivo_corrupto"
    mensaje = "El archivo no puede ser leÃ­do"
    detalles = @{
      archivoNombre = "certificado_notas.pdf"
      archivoTipo = "application/pdf"
    }
  }
} | ConvertTo-Json -Depth 10

Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST `
  -Body $jsonBody `
  -ContentType "application/json" `
  | Select-Object StatusCode, Content

RESULTADO ESPERADO:
-------------------
StatusCode: 200
Content: {"success": true, "mensaje": "Email de correcciÃ³n enviado exitosamente"}

EMAIL ESPERADO:
---------------
Para: lucasmaulenr@gmail.com
Asunto: CorrecciÃ³n Requerida - Archivo No Puede Ser LeÃ­do
Contenido: "Estimado/a JosÃ© HernÃ¡ndez..."
Validar: Caracteres especiales (Ã©, Ã¡) se ven correctos


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PRUEBA 4: CAMPOS FALTANTES (campos_faltantes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OBJETIVO: Validar template cuando faltan campos obligatorios
CARACTERES UTF-8: MarÃ­a FernÃ¡ndez (Ã­, Ã¡)

COMANDO POWERSHELL:
-------------------
$jsonBody = @{
  idSolicitud = "SOL-2025-004"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "MarÃ­a FernÃ¡ndez"
    rut = "45.678.901-2"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "campos_faltantes"
    mensaje = "Faltan campos obligatorios"
    detalles = @{
      camposFaltantes = @(
        "Nombre de la instituciÃ³n de origen",
        "AÃ±o de certificaciÃ³n",
        "Firma del estudiante"
      )
    }
  }
} | ConvertTo-Json -Depth 10

Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST `
  -Body $jsonBody `
  -ContentType "application/json" `
  | Select-Object StatusCode, Content

RESULTADO ESPERADO:
-------------------
StatusCode: 200
Content: {"success": true, "mensaje": "Email de correcciÃ³n enviado exitosamente"}

EMAIL ESPERADO:
---------------
Para: lucasmaulenr@gmail.com
Asunto: CorrecciÃ³n Requerida - InformaciÃ³n Incompleta
Contenido: "Estimado/a MarÃ­a FernÃ¡ndez..."
           "ğŸ“Œ CAMPOS FALTANTES:"
           "- Nombre de la instituciÃ³n de origen"
           "- AÃ±o de certificaciÃ³n"
           "- Firma del estudiante"
Validar: Caracteres especiales (Ã­, Ã¡, Ã³) se ven correctos


================================================================================
5ï¸âƒ£ EJECUTAR PRUEBAS AUTOMÃTICAS (PowerShell Script)
================================================================================

Si prefieres ejecutar las 4 pruebas de una sola vez:

OPCIÃ“N A: CREAR ARCHIVO DE SCRIPT
----------------------------------
1. Abre Notepad o VS Code
2. Copia el siguiente contenido:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Script de Pruebas AutomÃ¡ticas HU-005
# Ejecuta las 4 pruebas de templates

Write-Host ""
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan
Write-Host "  EJECUTANDO PRUEBAS AUTOMÃTICAS HU-005" -ForegroundColor Yellow
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan
Write-Host ""

# PRUEBA 1: formato_incorrecto
Write-Host "ğŸ§ª PRUEBA 1/4: formato_incorrecto (MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez)" -ForegroundColor Green
$jsonBody1 = @{
  idSolicitud = "SOL-AUTO-001"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez"
    rut = "12.345.678-9"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "formato_incorrecto"
    mensaje = "El archivo no estÃ¡ en formato PDF"
    detalles = @{
      archivoNombre = "certificado_notas.docx"
      archivoTipo = "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
      motivoRechazo = "Solo se aceptan archivos en formato PDF"
    }
  }
} | ConvertTo-Json -Depth 10

$response1 = Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST -Body $jsonBody1 -ContentType "application/json"
Write-Host "   âœ… Status: $($response1.StatusCode)" -ForegroundColor White
Start-Sleep -Seconds 2

# PRUEBA 2: tamano_excedido
Write-Host "ğŸ§ª PRUEBA 2/4: tamano_excedido (AndrÃ©s MuÃ±oz)" -ForegroundColor Green
$jsonBody2 = @{
  idSolicitud = "SOL-AUTO-002"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "AndrÃ©s MuÃ±oz"
    rut = "23.456.789-0"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "tamano_excedido"
    mensaje = "El archivo supera el tamaÃ±o mÃ¡ximo permitido"
    detalles = @{
      archivoNombre = "certificado_notas.pdf"
      archivoTipo = "application/pdf"
      tamanoMB = "15.7"
    }
  }
} | ConvertTo-Json -Depth 10

$response2 = Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST -Body $jsonBody2 -ContentType "application/json"
Write-Host "   âœ… Status: $($response2.StatusCode)" -ForegroundColor White
Start-Sleep -Seconds 2

# PRUEBA 3: archivo_corrupto
Write-Host "ğŸ§ª PRUEBA 3/4: archivo_corrupto (JosÃ© HernÃ¡ndez)" -ForegroundColor Green
$jsonBody3 = @{
  idSolicitud = "SOL-AUTO-003"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "JosÃ© HernÃ¡ndez"
    rut = "34.567.890-1"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "archivo_corrupto"
    mensaje = "El archivo no puede ser leÃ­do"
    detalles = @{
      archivoNombre = "certificado_notas.pdf"
      archivoTipo = "application/pdf"
    }
  }
} | ConvertTo-Json -Depth 10

$response3 = Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST -Body $jsonBody3 -ContentType "application/json"
Write-Host "   âœ… Status: $($response3.StatusCode)" -ForegroundColor White
Start-Sleep -Seconds 2

# PRUEBA 4: campos_faltantes
Write-Host "ğŸ§ª PRUEBA 4/4: campos_faltantes (MarÃ­a FernÃ¡ndez)" -ForegroundColor Green
$jsonBody4 = @{
  idSolicitud = "SOL-AUTO-004"
  timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ss.fffZ")
  estudiante = @{
    nombre = "MarÃ­a FernÃ¡ndez"
    rut = "45.678.901-2"
    email = "lucasmaulenr@gmail.com"
  }
  error = @{
    tipo = "campos_faltantes"
    mensaje = "Faltan campos obligatorios"
    detalles = @{
      camposFaltantes = @(
        "Nombre de la instituciÃ³n de origen",
        "AÃ±o de certificaciÃ³n",
        "Firma del estudiante"
      )
    }
  }
} | ConvertTo-Json -Depth 10

$response4 = Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" `
  -Method POST -Body $jsonBody4 -ContentType "application/json"
Write-Host "   âœ… Status: $($response4.StatusCode)" -ForegroundColor White

Write-Host ""
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan
Write-Host "  âœ… PRUEBAS COMPLETADAS" -ForegroundColor Green
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan
Write-Host ""
Write-Host "ğŸ“§ Revisa tu email: lucasmaulenr@gmail.com" -ForegroundColor Yellow
Write-Host "   DeberÃ­as recibir 4 emails en los prÃ³ximos minutos" -ForegroundColor White
Write-Host ""
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

3. Guarda como: test-hu005-completo.ps1
   UbicaciÃ³n: C:\Users\lucas\OneDrive\Escritorio\Uni2025\Practica\Convalidacion-Academica\hu005\tests\

4. Ejecuta:
   cd C:\Users\lucas\OneDrive\Escritorio\Uni2025\Practica\Convalidacion-Academica\hu005\tests
   .\test-hu005-completo.ps1


OPCIÃ“N B: COPIAR Y PEGAR DIRECTAMENTE EN POWERSHELL
----------------------------------------------------
1. Abre PowerShell
2. Copia TODO el script de arriba (desde "Write-Host" hasta el final)
3. Pega en PowerShell
4. Presiona Enter
5. Espera que ejecute las 4 pruebas (toma ~10 segundos)


================================================================================
6ï¸âƒ£ VERIFICAR RESULTADOS
================================================================================

PASO 1: VERIFICAR RESPUESTAS EN POWERSHELL
-------------------------------------------
Cada prueba debe mostrar:
âœ… StatusCode: 200
âœ… Content: {"success": true, "mensaje": "Email de correcciÃ³n enviado exitosamente"}

Si ves StatusCode diferente a 200:
âŒ 400 = Datos invÃ¡lidos (revisa JSON)
âŒ 404 = Webhook no encontrado (activa el workflow en n8n)
âŒ 500 = Error en servidor (revisa credenciales SMTP)


PASO 2: VERIFICAR EMAILS RECIBIDOS
-----------------------------------
1. Abre Gmail: https://mail.google.com
2. Inicia sesiÃ³n: lucasmaulenr@gmail.com
3. Busca emails de: maudevchile@gmail.com
4. DeberÃ­as ver 4 emails:

   Email 1:
   --------
   Asunto: CorrecciÃ³n Requerida - Formato de Documento Incorrecto
   Nombre: MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez
   Validar: Ã¡, Ã©, Ã± se ven correctos (NO Marï¿½a Josï¿½)

   Email 2:
   --------
   Asunto: CorrecciÃ³n Requerida - Archivo Demasiado Grande
   Nombre: AndrÃ©s MuÃ±oz
   TamaÃ±o: 15.7 MB
   Validar: Ã©, Ã± se ven correctos

   Email 3:
   --------
   Asunto: CorrecciÃ³n Requerida - Archivo No Puede Ser LeÃ­do
   Nombre: JosÃ© HernÃ¡ndez
   Validar: Ã©, Ã¡ se ven correctos

   Email 4:
   --------
   Asunto: CorrecciÃ³n Requerida - InformaciÃ³n Incompleta
   Nombre: MarÃ­a FernÃ¡ndez
   Campos faltantes: 3 listados
   Validar: Ã­, Ã¡ se ven correctos


PASO 3: VERIFICAR EJECUCIONES EN n8n
-------------------------------------
1. Ve a n8n: http://localhost:5678
2. Abre workflow HU-005
3. Click en pestaÃ±a "Executions" (esquina superior derecha)
4. DeberÃ­as ver 4 ejecuciones con estado "success" (verde)
5. Click en cada una para ver el flujo de datos


PASO 4: VERIFICAR CARACTERES UTF-8 (CRÃTICO)
---------------------------------------------
Abre cada email y verifica que NO haya caracteres corruptos:

âœ… CORRECTO:
   MarÃ­a JosÃ© PÃ©rez NÃºÃ±ez
   AndrÃ©s MuÃ±oz
   JosÃ© HernÃ¡ndez
   MarÃ­a FernÃ¡ndez
   aÃ±o, acadÃ©mico, instituciÃ³n, certificaciÃ³n

âŒ INCORRECTO (si ves esto, hay problema):
   Marï¿½a Josï¿½ Pï¿½rez Nï¿½ï¿½ez
   Andrï¿½s Muï¿½oz
   Josï¿½ Hernï¿½ndez
   aï¿½o, acadï¿½mico


================================================================================
7ï¸âƒ£ DETENER EL ENTORNO
================================================================================

OPCIÃ“N A: DOCKER DESKTOP
-------------------------
1. Abre Docker Desktop
2. Ve a "Containers"
3. Busca: convalidacion-academica-n8n-1
4. Click en botÃ³n "â¹ Stop"


OPCIÃ“N B: POWERSHELL
--------------------
1. Abre PowerShell
2. Ejecuta:
   docker stop convalidacion-academica-n8n-1

3. O detÃ©n todo el stack:
   cd C:\Users\lucas\OneDrive\Escritorio\Uni2025\Practica\Convalidacion-Academica
   docker-compose down


================================================================================
8ï¸âƒ£ TROUBLESHOOTING (SOLUCIÃ“N DE PROBLEMAS)
================================================================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 1: "No connection could be made" (No hay conexiÃ³n)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: Docker container no estÃ¡ corriendo

SOLUCIÃ“N:
1. Abre Docker Desktop
2. Ve a "Containers"
3. Inicia: convalidacion-academica-n8n-1
4. Espera 10 segundos
5. Intenta nuevamente


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 2: StatusCode 404 (Webhook no encontrado)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: Workflow no estÃ¡ activo

SOLUCIÃ“N:
1. Ve a n8n: http://localhost:5678
2. Abre workflow "HU-005: NotificaciÃ³n CorrecciÃ³n Documentos"
3. Click en botÃ³n "Activate" (esquina superior derecha)
4. Verifica que aparezca "Active" en verde
5. Intenta nuevamente


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 3: StatusCode 400 (Datos invÃ¡lidos)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: JSON mal formado o campos faltantes

SOLUCIÃ“N:
1. Copia exactamente el comando de esta guÃ­a
2. NO modifiques la estructura JSON
3. Verifica que incluya:
   - idSolicitud
   - estudiante.nombre
   - estudiante.email
   - error.tipo
   - error.mensaje
4. Intenta nuevamente


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 4: StatusCode 500 (Error en servidor)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: Error en SMTP (credenciales incorrectas o Gmail bloqueado)

SOLUCIÃ“N:
1. Ve a n8n: http://localhost:5678
2. Settings > Credentials
3. Busca: SMTP account (maudevchile@gmail.com)
4. Verifica:
   - Host: smtp.gmail.com
   - Port: 465
   - User: maudevchile@gmail.com
   - Password: [App Password de 16 caracteres]
   - Secure: SSL/TLS
5. Si falta App Password:
   - Ve a: https://myaccount.google.com/apppasswords
   - Genera nueva contraseÃ±a de aplicaciÃ³n
   - Actualiza en n8n
6. Intenta nuevamente


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 5: Email no llega (StatusCode 200 OK pero sin email)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: Email en spam o demora en entrega

SOLUCIÃ“N:
1. Revisa carpeta SPAM en Gmail
2. Busca: maudevchile@gmail.com
3. Si estÃ¡ en spam:
   - Marca como "No es spam"
   - Mueve a bandeja de entrada
4. Espera 1-2 minutos (Gmail puede demorar)
5. Revisa ejecuciÃ³n en n8n:
   - Executions > Click en ejecuciÃ³n
   - Verifica nodo "Email-Correccion" tenga Ã©xito
   - Revisa output del nodo


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 6: Caracteres UTF-8 corruptos (Marï¿½a en vez de MarÃ­a)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: Nodo Email-Correccion sin encoding correcto

SOLUCIÃ“N:
1. Ve a n8n: http://localhost:5678
2. Abre workflow HU-005
3. Click en nodo "Email-Correccion"
4. Verifica configuraciÃ³n:
   Email Format: text (NO html)
   Options > Encoding: quoted-printable
5. Si estÃ¡ mal configurado:
   - Cambia Email Format a "text"
   - Expande "Options"
   - Set Encoding: "quoted-printable"
   - Click "Save"
6. Ejecuta prueba nuevamente


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PROBLEMA 7: Docker Desktop no inicia container
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CAUSA: Puerto 5678 ocupado o error en Docker

SOLUCIÃ“N:
1. Verifica que puerto 5678 estÃ© libre:
   En PowerShell:
   netstat -ano | findstr :5678

2. Si hay proceso usando el puerto:
   taskkill /PID [nÃºmero_del_PID] /F

3. Reinicia Docker Desktop:
   - Click derecho en Ã­cono Docker
   - "Restart Docker Desktop"
   - Espera 30 segundos

4. Inicia container nuevamente


================================================================================
ğŸ“Š RESUMEN DE COMANDOS RÃPIDOS
================================================================================

INICIAR ENTORNO:
docker-compose up -d

VERIFICAR ESTADO:
docker ps

PRUEBA RÃPIDA (formato_incorrecto):
$jsonBody = '{"idSolicitud":"SOL-TEST-999","timestamp":"2025-11-09T10:00:00.000Z","estudiante":{"nombre":"MarÃ­a JosÃ© PÃ©rez","rut":"12.345.678-9","email":"lucasmaulenr@gmail.com"},"error":{"tipo":"formato_incorrecto","mensaje":"Formato incorrecto","detalles":{"archivoNombre":"test.docx","archivoTipo":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","motivoRechazo":"Solo PDF"}}}'
Invoke-WebRequest -Uri "http://localhost:5678/webhook/hu005-notificacion-correccion" -Method POST -Body $jsonBody -ContentType "application/json"

DETENER ENTORNO:
docker stop convalidacion-academica-n8n-1

VER LOGS (si hay error):
docker logs convalidacion-academica-n8n-1


================================================================================
ğŸ“š DOCUMENTACIÃ“N ADICIONAL
================================================================================

UBICACIÃ“N DE ARCHIVOS:
- Workflow: hu005/workflows/HU-005.json
- Resultados: hu005/docs/HU-05_RESULTADOS_PRUEBAS.md
- Tests: hu005/tests/

EVIDENCIA DE 23 PRUEBAS EXITOSAS:
Revisa: hu005/docs/HU-05_RESULTADOS_PRUEBAS.md
- 23 pruebas ejecutadas
- 100% tasa de Ã©xito
- Todas las plantillas validadas
- UTF-8 funcionando perfectamente

INTEGRACIÃ“N CON HU-001:
Revisa: hu005/docs/INTEGRACION_HU-001_CON_HU-005.md

GITHUB REPOSITORY:
https://github.com/maudevdigital/sistema-convalidaciones-unab


================================================================================
âœ… CHECKLIST DE VALIDACIÃ“N
================================================================================

Antes de considerar las pruebas como exitosas, verifica:

[ ] Docker container estÃ¡ corriendo
[ ] Workflow HU-005 estÃ¡ activo en n8n
[ ] Webhook responde con StatusCode 200
[ ] 4 emails recibidos en lucasmaulenr@gmail.com
[ ] Caracteres UTF-8 correctos (MarÃ­a, JosÃ©, AndrÃ©s, aÃ±o, Ã±)
[ ] MIME types legibles (Word (DOCX), no application/vnd...)
[ ] Cada template tiene contenido apropiado
[ ] Links de reenvÃ­o incluidos
[ ] Formato profesional y claro
[ ] Sin errores en ejecuciones de n8n


================================================================================
ğŸ’¡ CONSEJOS FINALES
================================================================================

1. EJECUTA LAS PRUEBAS DE UNA EN UNA
   - Espera 5-10 segundos entre cada prueba
   - Verifica cada email antes de continuar
   - MÃ¡s fÃ¡cil identificar problemas

2. REVISA LOS LOGS EN n8n
   - Executions muestra todo el flujo de datos
   - Puedes ver exactamente quÃ© pasÃ³ en cada nodo
   - Ãštil para debugging

3. GUARDA CAPTURAS DE PANTALLA
   - Emails recibidos (4 templates)
   - Panel de ejecuciones en n8n
   - Respuestas StatusCode 200
   - Para documentaciÃ³n o portfolio

4. PRUEBA CON TU PROPIO EMAIL
   - Cambia "lucasmaulenr@gmail.com" por tu email
   - VerÃ¡s los emails en tiempo real
   - Mejor validaciÃ³n de funcionamiento

5. EXPERIMENTA CON DIFERENTES DATOS
   - Cambia nombres de estudiantes
   - Prueba diferentes tipos MIME
   - Valida robustez del sistema


================================================================================
ğŸ“ CONTACTO Y SOPORTE
================================================================================

Si tienes problemas que no puedes resolver con esta guÃ­a:

1. Revisa el archivo de resultados:
   hu005/docs/HU-05_RESULTADOS_PRUEBAS.md

2. Revisa los logs de Docker:
   docker logs convalidacion-academica-n8n-1

3. Consulta la documentaciÃ³n oficial de n8n:
   https://docs.n8n.io/

4. Repositorio del proyecto:
   https://github.com/maudevdigital/sistema-convalidaciones-unab


================================================================================
FIN DE LA GUÃA
================================================================================

Creado: 9 de noviembre de 2025
VersiÃ³n: 1.0
Proyecto: Sistema de Convalidaciones AcadÃ©micas UNAB
HU-005: NotificaciÃ³n de CorrecciÃ³n de Documentos

Â¡Ã‰xito con tus pruebas! ğŸš€
